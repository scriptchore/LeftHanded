"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[422],{4422:(j,m,s)=>{s.r(m),s.d(m,{AccountModule:()=>G});var a=s(6610),r=s(8832),t=s(1028),u=s(6672),l=s(9362),c=s(6771);let d=(()=>{class e{constructor(o,n,i){this.accountService=o,this.router=n,this.activatedRoute=i,this.loginForm=new r.gE({email:new r.MJ("",[r.k0.required,r.k0.email]),password:new r.MJ("",r.k0.required)}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(u.D),t.rXU(l.Ix),t.rXU(l.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"form",2),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(3,"div",3)(4,"h1",4),t.EFF(5," Login "),t.k0s()(),t.nrm(6,"app-text-input",5)(7,"app-text-input",6),t.j41(8,"div",7)(9,"button",8),t.EFF(10," Sign in "),t.k0s()()()()()),2&n&&(t.R7$(2),t.Y8G("formGroup",i.loginForm),t.R7$(4),t.Y8G("formControl",i.loginForm.controls.email)("label","Email"),t.R7$(1),t.Y8G("formControl",i.loginForm.controls.password)("label","Password")("type","password"),t.R7$(2),t.Y8G("disabled",i.loginForm.invalid))},dependencies:[r.qT,r.BC,r.cb,r.l_,r.j4,c.f]})}}return e})();var g=s(8887),f=s(8486),h=s(2831),v=s(3527),b=s(6347);function F(e,p){if(1&e&&(t.j41(0,"li",10),t.EFF(1),t.k0s()),2&e){const o=p.$implicit;t.R7$(1),t.SpI(" ",o," ")}}function y(e,p){if(1&e&&(t.j41(0,"ul",10),t.DNE(1,F,2,1,"li",11),t.k0s()),2&e){const o=t.XpG();t.R7$(1),t.Y8G("ngForOf",o.errors)}}const C=[{path:"login",component:d},{path:"register",component:(()=>{class e{constructor(o,n,i){this.fb=o,this.accountService=n,this.router=i,this.errors=null,this.complexPassword="(?=^.{6,255}$)((?=.*d)(?=.*[A-Z])(?=.*[a-z])|(?=.*d)(?=.*[^A-Za-z0-9])(?=.*[a-z])|(?=.*[^A-Za-z0-9])(?=.*[A-Z])(?=.*[a-z])|(?=.*d)(?=.*[A-Z])(?=.*[^A-Za-z0-9]))^.*",this.registerForm=this.fb.group({displayName:["",r.k0.required],email:["",[r.k0.required,r.k0.email],[this.validateEmailNotTaken()]],password:["",[r.k0.required,r.k0.pattern(this.complexPassword)]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:o=>this.errors=o.errors})}validateEmailNotTaken(){return o=>o.valueChanges.pipe((0,g.B)(1e3),(0,f.s)(1),(0,h.n)(()=>this.accountService.checkEmailExists(o.value).pipe((0,v.T)(n=>n?{emailExists:!0}:null),(0,b.j)(()=>o.markAsTouched))))}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(r.ok),t.rXU(u.D),t.rXU(l.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-register"]],decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"],[1,"text-danger","list-unstyled"],["class","text-danger list-unstyled",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"form",2),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(3,"div",3)(4,"h1",4),t.EFF(5," Sign up "),t.k0s()(),t.nrm(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),t.DNE(9,y,2,1,"ul",7),t.j41(10,"div",8)(11,"button",9),t.EFF(12," Sign up "),t.k0s()()()()()),2&n&&(t.R7$(2),t.Y8G("formGroup",i.registerForm),t.R7$(4),t.Y8G("formControl",i.registerForm.controls.displayName)("label","Display Name"),t.R7$(1),t.Y8G("formControl",i.registerForm.controls.email)("label","Email"),t.R7$(1),t.Y8G("formControl",i.registerForm.controls.password)("label","Password")("type","password"),t.R7$(1),t.Y8G("ngIf",i.errors),t.R7$(2),t.Y8G("disabled",i.registerForm.invalid))},dependencies:[a.Sq,a.bT,r.qT,r.BC,r.cb,r.l_,r.j4,c.f],styles:[".invlalid-feedback[_ngcontent-%COMP%]{color:red}"]})}}return e})()}];let R=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[l.iI.forChild(C),l.iI]})}}return e})();var S=s(3887);let G=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[a.MD,R,S.G]})}}return e})()}}]);