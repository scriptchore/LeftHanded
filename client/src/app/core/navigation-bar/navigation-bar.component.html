<header class="d-flex p-3  site-header fixed-top shadow-sm">
 <nav class="navbar navbar-expand-md  header-content px-3 py-2 w-100 justify-content-between">

    <div class="logo navbar-brand mx-auto d-md-block text-center" >
      <a class="header-logo" href="index.html">
        <img alt="LeftHanded" src="assets/images/logo.png" />
      </a>
    </div>

    <!-- Mobile Hamburger -->
    <button class="navbar-toggler d-md-none me-2 order-0" type="button" data-bs-target="#mainNav" (click)="toggleMobileMenu()" >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Main Nav Bar -->
    <div class="navbar collapse navbar-collapse justify-content-center d-md-flex d-none" id="mainNav">
      <nav class="header-nav" v-show="!viewMobileUserCenter">
        <ul class="header-nav-top d-flex flex-nowrap">
          <li>
            <a class="top-link nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
              <span class="top-link-text">HOME</span>
            </a>
          </li>
          <li>
            <a class="p-2" routerLink="/shop" routerLinkActive="active" class="top-link nav-link sub"
              [ngClass]="{ show: viewSubNav === 'SUPPORT-804' }">
              <span class="top-link-text">SHOP</span>
            </a>
          </li>
          <li>
            <a routerLink="/shop" routerLinkActive="active" class="top-link nav-link sub"
              [ngClass]="{ show: viewSubNav === 'PRODUCT-205' }">
              <span class="top-link-text">PRODUCTS</span>
            </a>
          </li>
          <li>
            <a href="javascript:void()" class="top-link nav-link sub" [ngClass]="{ show: viewSubNav === 'SUPPORT-231' }">
              <span class="top-link-text">CONTACT</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <!-- Cart and Auth Section -->
    <div class="d-flex align-item-center justify-content-between">
    
        <div class="d-flex flex-nowrap header-link-box align-item-center justify-content-between auth-section">
          <!-- Basket -->
          <a routerLink="/basket" class="header-link">
            <i class="fa fa-shopping-cart fa-2x me-5 text-light cart-icon"></i>
            <div *ngIf="(basketService.basketSource$ | async) as basket" class="cart-no">{{getCount(basket.items)}}
            </div>
          </a>

          <!-- If user not logged in  -->
          <div class="d-flex flex-nowrap auth-buttons auth-cart-wrapper " >
         
            <ng-container *ngIf="(accountService.currentUser$ | async) === null">
              <a routerLink="/account/login" class="btn btn-outline-secondary me-3 header-link">Login</a>
              <a routerLink="/account/register" class="btn btn-outline-secondary me-3 header-link">Sign Up</a>
            </ng-container>
          </div>

          <!-- Auth Dropdown for Small Screens -->
          <div class="d-md-none dropdown auth-dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
              aria-expanded="false">
             <i class="fa fa-user fa-2x text-light"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end animate-slide">
              <li><a class="dropdown-item" routerLink="/account/login">Login</a></li>
              <li><a class="dropdown-item" routerLink="/account/register">Sign Up</a></li>
            </ul>
          </div>
      
          <!-- If user logged in -->
          <ng-container *ngIf="accountService.currentUser$ | async as user">
            <div class="dropdown ms-3 me-5 header-link" style="cursor: pointer;" dropdown>
              <a dropdownToggle class="dropdown-toggle">
                <strong>Welcome {{user.displayName}}</strong>
              </a>
              <ul *dropdownMenu class="dropdown-menu dropdown-menu-end">
                <li class="py-1">
                  <a routerLink="/basket" class="dropdown-item">
                    <i class="fa fa-shopping-cart me-2"></i> View basket
                  </a>
                </li>
                <li class="py-1">
                  <a routerLink="/basket" class="dropdown-item">
                    <i class="fa fa-history me-2"></i> View orders
                  </a>
                </li>
                <div class="dropdown-divider"></div>
                <li class="py-1">
                  <a (click)="accountService.logout()" class="dropdown-item">
                    <i class="fa fa-sign-out me-2"></i> Logout
                  </a>
                </li>
              </ul>
            </div>
          </ng-container>
        </div>
    </div>
  </nav>
</header>

<!-- Slide-in Mobile Menu -->

<div class="mobile-slide-menu" [class.active]="mobileMenuOpen">
  <button class="close-btn" (click)="closeMobileMenu()">&times;</button>
  <ul class="mobile-nav-list">

     <li
          class="menu-item animated-item"
          *ngFor="let item of menuItems; let i = index"
          [style.animationDelay]="(i * 0.1) + 's'"
        >
          <a [routerLink]="item.link" (click)="closeMobileMenu()">
            <i [class]="item.icon + ' me-2'"></i> {{ item.label }}
          </a>
          <hr class="menu-divider" />
 </li>
    
  </ul>
</div>

<!-- <div class="mobile-slide-menu" [class.active]="mobileMenuOpen">
  <button class="close-btn" (click)="closeMobileMenu()">&times;</button>
  <ul class="mobile-nav-list">
    <li><a routerLink="/" (click)="closeMobileMenu()">HOME</a></li>
    <li><a routerLink="/shop" (click)="closeMobileMenu()">SHOP</a></li>
    <li><a routerLink="/products" (click)="closeMobileMenu()">PRODUCTS</a></li>
    <li><a routerLink="/contact" (click)="closeMobileMenu()">CONTACT</a></li>
  </ul>
</div> -->

<!-- Overlay -->
<div class="mobile-menu-overlay" [class.active]="mobileMenuOpen" (click)="closeMobileMenu()"></div>